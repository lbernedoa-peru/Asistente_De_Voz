<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reserva Manual | Cl√≠nica SaludPlus</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #f5f8fa;
      color: #333;
    }
    .form-card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 18px rgba(0,0,0,0.1);
      padding: 30px;
    }
    .form-title {
      text-align: center;
      font-weight: 600;
      color: #0d6efd;
      margin-bottom: 25px;
    }
    .btn-primary {
      padding: 12px;
      font-size: 1.1rem;
      border-radius: 8px;
    }
    /* Estilo para la tarjeta del resumen */
    .resumen-card {
      background: #e9f3ff;
      border: 2px solid #0d6efd;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      animation: fadeIn 0.6s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <nav class="navbar navbar-expand-lg" style="background:#0d6efd;">
    <div class="container">
      <a class="navbar-brand text-white fw-bold" href="/">üè• Cl√≠nica SaludPlus</a>
    </div>
  </nav>

  <!-- Formulario de Reserva -->
  <div class="container py-5">
    <div class="col-lg-8 mx-auto">
      <div class="form-card">
        <h2 class="form-title">üìù Reserva tu Cita Manualmente</h2>

        <!-- Alerta de √©xito oculta al inicio -->
        <div id="successMessage" class="alert alert-success d-none text-center">
          <h5 class="fw-bold">‚úÖ ¬°Tu cita ha sido reservada con √©xito!</h5>
          <div id="resumenCita" class="mt-3"></div>
          <button id="downloadPdf" class="btn btn-outline-primary mt-3 d-none">üìÑ Descargar comprobante en PDF</button>
        </div>

        <form id="reservaForm">
          <!-- Especialidad -->
          <div class="mb-3">
            <label class="form-label fw-bold">Especialidad</label>
            <select class="form-select" id="especialidad" required>
              <option value="">Seleccione una especialidad</option>
              <option>Medicina General</option>
              <option>Odontolog√≠a</option>
              <option>Pediatr√≠a</option>
              <option>Cardiolog√≠a</option>
              <option>Dermatolog√≠a</option>
            </select>
          </div>

          <!-- Doctor -->
          <div class="mb-3">
            <label class="form-label fw-bold">Doctor</label>
            <select class="form-select" id="doctor" required>
              <option value="">Seleccione un doctor</option>
              <option>Dr. Juan P√©rez - Medicina General</option>
              <option>Dra. Ana Torres - Odontolog√≠a</option>
              <option>Dra. Laura G√≥mez - Pediatr√≠a</option>
              <option>Dr. Carlos Vega - Cardiolog√≠a</option>
              <option>Dra. Sof√≠a Rojas - Dermatolog√≠a</option>
            </select>
          </div>

          <!-- Fecha -->
          <div class="mb-3">
            <label class="form-label fw-bold">Fecha</label>
            <input type="date" class="form-control" id="fecha" required>
          </div>

          <!-- Horario -->
          <div class="mb-3">
            <label class="form-label fw-bold">Horario</label>
            <select class="form-select" id="horario" required>
              <option value="">Seleccione un horario</option>
              <option>08:00 - 09:00 AM</option>
              <option>09:00 - 10:00 AM</option>
              <option>10:00 - 11:00 AM</option>
              <option>02:00 - 03:00 PM</option>
              <option>04:00 - 05:00 PM</option>
            </select>
          </div>

          <!-- Datos del Paciente -->
          <h5 class="mt-4 mb-3 fw-bold text-secondary">Datos del Paciente</h5>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label fw-bold">Nombre</label>
              <input type="text" class="form-control" id="nombre" placeholder="Ingrese su nombre" required>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Apellidos</label>
              <input type="text" class="form-control" id="apellidos" placeholder="Ingrese sus apellidos" required>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Tel√©fono</label>
              <input type="tel" class="form-control" id="telefono" placeholder="Ej: 999888777" 
                     pattern="[0-9]+" inputmode="numeric" required>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">Correo</label>
              <input type="email" class="form-control" id="correo" placeholder="Ej: usuario@gmail.com" required>
            </div>
          </div>

          <!-- Bot√≥n -->
          <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary w-100">‚úÖ Confirmar Reserva</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center text-white py-3" style="background:#0d6efd;">
    <p class="mb-0">¬© 2025 Cl√≠nica SaludPlus | Todos los derechos reservados</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Librer√≠a jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Script para mostrar mensaje de √©xito con resumen -->
  <script>
    let citaData = {};

    document.getElementById("reservaForm").addEventListener("submit", function(e) {
      e.preventDefault(); // Evita que recargue la p√°gina

      // Capturar valores del formulario
      citaData = {
        especialidad: document.getElementById("especialidad").value,
        doctor: document.getElementById("doctor").value,
        fecha: document.getElementById("fecha").value,
        horario: document.getElementById("horario").value,
        nombre: document.getElementById("nombre").value,
        apellidos: document.getElementById("apellidos").value,
        telefono: document.getElementById("telefono").value,
        correo: document.getElementById("correo").value
      };

      // Crear resumen con estilo de card
      const resumen = `
        <div class="resumen-card text-start">
          <h6 class="fw-bold mb-3">üìã Resumen de tu cita</h6>
          <p><strong>Especialidad:</strong> ${citaData.especialidad}</p>
          <p><strong>Doctor:</strong> ${citaData.doctor}</p>
          <p><strong>Fecha:</strong> ${citaData.fecha}</p>
          <p><strong>Horario:</strong> ${citaData.horario}</p>
          <hr>
          <p><strong>Paciente:</strong> ${citaData.nombre} ${citaData.apellidos}</p>
          <p><strong>Tel√©fono:</strong> ${citaData.telefono}</p>
          <p><strong>Correo:</strong> ${citaData.correo}</p>
        </div>
      `;

      document.getElementById("resumenCita").innerHTML = resumen;

      // Mostrar mensaje de √©xito y bot√≥n PDF
      document.getElementById("successMessage").classList.remove("d-none");
      document.getElementById("downloadPdf").classList.remove("d-none");

      // Resetear formulario
      this.reset();

      // Subir al inicio para ver mensaje
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Descargar comprobante PDF
    document.getElementById("downloadPdf").addEventListener("click", function() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(16);
      doc.text("üè• Cl√≠nica SaludPlus", 20, 20);
      doc.setFontSize(12);
      doc.text("Comprobante de Reserva de Cita", 20, 30);

      doc.setFontSize(11);
      doc.text(`Especialidad: ${citaData.especialidad}`, 20, 50);
      doc.text(`Doctor: ${citaData.doctor}`, 20, 60);
      doc.text(`Fecha: ${citaData.fecha}`, 20, 70);
      doc.text(`Horario: ${citaData.horario}`, 20, 80);
      doc.text(`Paciente: ${citaData.nombre} ${citaData.apellidos}`, 20, 100);
      doc.text(`Tel√©fono: ${citaData.telefono}`, 20, 110);
      doc.text(`Correo: ${citaData.correo}`, 20, 120);

      doc.setFontSize(10);
      doc.text("Gracias por confiar en Cl√≠nica SaludPlus", 20, 140);

      doc.save("comprobante_cita.pdf");
    });
  </script>
</body>
</html>
